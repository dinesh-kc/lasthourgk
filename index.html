<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MCQ Application</title>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f8f9fa;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
    }
    h1 {
      color: #007bff;
    }

    /* Sidebar Styles */
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #343a40;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }
    .sidebar h2 {
      color: #007bff;
      margin-bottom: 20px;
      text-align: center;
    }
    .sidebar a {
      text-decoration: none;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      margin-bottom: 10px;
      display: block;
      transition: background-color 0.3s;
    }
    .sidebar a:hover {
      background-color: #495057;
    }

    /* Mobile Sidebar */
    .menu-btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1100;
      display: none;
    }
    .menu-btn:hover {
      background-color: #0056b3;
    }

    /* Show Menu Button on Mobile */
    @media (max-width: 768px) {
      .menu-btn {
        display: block;
      }
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .sidebar.visible {
        transform: translateX(0);
      }
    }

    /* Content Area */
    .content {
      margin-left: 250px;
      padding: 20px;
      width: calc(100% - 250px);
    }
    @media (max-width: 768px) {
      .content {
        margin-left: 0;
        width: 100%;
      }
    }

    /* Quiz and Bookmark Styles */
    .quiz-container {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 100%;
      padding: 20px;
      margin-bottom: 20px;
    }
    .question {
      margin-bottom: 20px;
    }
    .question-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .options {
      list-style-type: none;
      padding: 0;
    }
    .options li {
      margin-bottom: 10px;
    }
    .correct {
      color: green;
      font-weight: bold;
    }
    .incorrect {
      color: red;
      font-weight: bold;
    }
    .bookmarked {
      color: blue;
      font-weight: bold;
    }
    .btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
      transition: background-color 0.3s;
    }
    .btn:hover {
      background-color: #0056b3;
    }
    #result, #bookmarks {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 100%;
      padding: 20px;
      margin-top: 20px;
    }
    .remove-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .remove-btn:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="menu-btn" onclick="toggleSidebar()">☰ Menu</button>

  <!-- Sidebar Navigation -->
  <div class="sidebar" id="sidebar">
    <h2>Navigation</h2>
    <a href="index.html">Home</a>
    <a href="quiz.html">Quiz</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="#bookmarked-questions" onclick="showBookmarks()">Bookmarks</a>
  </div>

  <!-- Main Content -->
  <div class="content">
    <h1>MCQ Application</h1>
    <div class="quiz-container" id="quiz"></div>
    <div>
      <button class="btn" onclick="checkAnswers()">Submit</button>
    </div>
    <div id="result"></div>
    <div id="bookmarks">
      <h2>Bookmarked Questions</h2>
    </div>
  </div>

  <script>
    const quizData = {
      "questions": [
        {
          "number": 1,
          "date": "2081-10-01",
          "question": "पर्यावरण विज्ञान (Ecology) का प्रथम प्रयोगकर्ता को हुन्?",
          "options": {
            "A": "कालि एरली",
            "B": "ए जी ट्रान्स्ली",
            "C": "बार्बरा वाईड",
            "D": "अर्नस्ट ह्याकेले"
          },
          "correct_answer": "D"
        },
        {
          "number": 2,
          "date": "2081-10-01",
          "question": "सातौं कृषि गणना, २०७८ अनुसार सबैभन्दा धेरै गहुँ खेती हुने नेपाली जिल्ला कुन हो?",
          "options": {
            "A": "रुपन्देही",
            "B": "भापा",
            "C": "मोरङ",
            "D": "चितवन"
          },
          "correct_answer": "A"
        }
      ]
    };

    let bookmarks = JSON.parse(localStorage.getItem('bookmarks')) || [];

    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('visible');
    }

    function loadQuiz() {
      const quizContainer = document.getElementById("quiz");
      quizData.questions.forEach((question, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question";
        questionElement.innerHTML = `
          <div class="question-title">${index + 1}. ${question.question}</div>
          <ul class="options">
            ${Object.keys(question.options).map(option =>
          `<li><label><input type="radio" name="question${index}" value="${option}"> ${option}. ${question.options[option]}</label></li>`).join('')}
          </ul>
          <button class="btn" onclick="bookmarkQuestion(${index})">Bookmark</button>
        `;
        quizContainer.appendChild(questionElement);
      });
      loadBookmarks();
    }

    function bookmarkQuestion(index) {
      if (!bookmarks.includes(index)) {
        bookmarks.push(index);
        localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        loadBookmarks();
        alert("Question bookmarked!");
      }
    }

    function loadBookmarks() {
      const bookmarksContainer = document.getElementById("bookmarks");
      bookmarksContainer.innerHTML = '<h2>Bookmarked Questions</h2>' + bookmarks.map(index => {
        const question = quizData.questions[index];
        if (!question) return '';  // Safety check to avoid undefined reference
        return `
          <div class="bookmarked">
            <b>Question ${index + 1}:</b> ${question.question}<br>
            ${Object.keys(question.options).map(option =>
          `<div>${option}. ${question.options[option]}</div>`).join('')}
            <button class="remove-btn" onclick="removeBookmark(${index})">Remove Bookmark</button>
          </div>
        `;
      }).join('');
    }

    function removeBookmark(index) {
      bookmarks = bookmarks.filter(i => i !== index);
      localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
      loadBookmarks();
    }

    function showBookmarks() {
      document.getElementById("bookmarks").scrollIntoView({ behavior: "smooth" });
    }

    function checkAnswers() {
      let score = 0;
      const results = [];

      quizData.questions.forEach((question, index) => {
        const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
        const correctOption = question.correct_answer;
        
        const optionsElements = document.getElementsByName(`question${index}`);
        optionsElements.forEach(optionElement => {
          const optionLabel = optionElement.parentElement;
          if (optionElement.value === correctOption) {
            optionLabel.classList.add('correct');
          } else {
            optionLabel.classList.remove('correct');
          }
          if (selectedOption && selectedOption.value === optionElement.value && optionElement.value !== correctOption) {
            optionLabel.classList.add('incorrect');
          } else {
            optionLabel.classList.remove('incorrect');
          }
        });

        const result = {
          question: question.question,
          correctAnswer: question.options[correctOption],
          userAnswer: selectedOption ? question.options[selectedOption.value] : 'No Answer'
        };

        results.push(result);

        if (selectedOption && selectedOption.value === correctOption) {
          score++;
        }
      });

      document.getElementById("result").innerHTML = `Your score: ${score} / ${quizData.questions.length}<br>${results.map(result => `
        <div>
          <b>Question:</b> ${result.question}<br>
          <b>Correct Answer:</b> ${result.correctAnswer}<br>
          <b>Your Answer:</b> ${result.userAnswer}<br>
        </div>
      `).join('')}`;
    }

    window.onload = loadQuiz;
  </script>
</body>
</html>
